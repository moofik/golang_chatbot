scenario:
  name: cryptobot
  provider:
    name: telegram
    token: '2117926131:AAF7tpRWkO1a4qhdjorbGCdfAHAfs8jCV7o' #'1799138792:AAGryx8c1D48yT8TAD5VCG1yzXs8k3tPtIc'

  states:
    -
      name: unknown
      transitions:
        - {name: to_start, state_to: start, command: {type: 'recognize_input', arguments: ['/start']}}

    -
      name: start
      actions:
        send_text:
          name: send_text
          params:
            text: >
              –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É –≤–∞–º –ø—Ä–æ–¥–∞—Ç—å –∏–ª–∏ –∫—É–ø–∏—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É. –ê –µ—â–µ —É –Ω–∞—Å –µ—Å—Ç—å –∫–æ—à–µ–ª—ë–∫, –≥–¥–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–≤–æ–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ :)
              –Ø —É–∂–µ –∑–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –≤ —Å–∏—Å—Ç–µ–º–µ, —á—Ç–æ–±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.
      transitions:
        - {name: to_main_menu, state_to: main_menu, command: {type: 'button', arguments: ['/back', '–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–µ–Ω—é']}}

    -
      name: main_menu
      actions:
        send_markup:
          name: send_reply_markup
          params:
            buttons: ['–ú–∞—Ä–∫–µ—Çüíµ', '–ö–æ—à–µ–ª–µ–∫üí†']
            text: >
              –°–Ω–∏–∑—É –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –±–æ—Ç–∞.
              –ú–∞—Ä–∫–µ—Ç - –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∏ –ø–æ–∫—É–ø–∞—Ç—å –≤–∞–ª—é—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—è –ª—é–±—ã–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏ –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –∏ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∫–∞—Ä—Ç—É.
              –ö–æ—à–µ–ª–µ–∫ - –≤–∞—à –∫–æ—à–µ–ª–µ–∫ –Ω–∞ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, —Å –µ–≥–æ –ø–æ–º–æ—â—å—é –≤—ã –º–æ–∂–µ—Ç–µ —Å –ª—ë–≥–∫–æ—Å—Ç—å—é –ø–æ–∫—É–ø–∞—Ç—å, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å, –ø—Ä–æ–¥–∞–≤–∞—Ç—å, –∞ —Ç–∞–∫ –∂–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ üòâ
              –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –º—ã –≤—ã—Å—Ç—É–ø–∞–µ–º –≥–∞—Ä–∞–Ω—Ç–æ–º —Å–¥–µ–ª–æ–∫.
        create_wallet:
          name: create_wallet
      transitions:
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market
      actions:
        cancel_order_data:
          name: cancel_order_data
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –ú–∞—Ä–∫–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∏ –ø–æ–∫—É–ø–∞—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—è –ª—é–±—ã–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏ –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –∏–ª–∏ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∫–∞—Ä—Ç—É.
              –ë–æ—Ç –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≥–∞—Ä–∞–Ω—Ç–æ–º —Å–¥–µ–ª–∫–∏ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –º–æ–Ω–µ—Ç—ã –Ω–∞ –≤—Ä–µ–º—è –µ–µ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è. –° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è –≤ 3%.
      transitions:
        - {name: to_market_buy, state_to: market_buy, command: {type: 'button', arguments: ['/market_buy', '–ö—É–ø–∏—Ç—å']}}
        - {name: to_market_sell, state_to: market_sell, command: {type: 'button', arguments: ['/market_sell', '–ü—Ä–æ–¥–∞—Ç—å']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }
    -
      name: market_buy
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_type' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏–ø–∏—Ç–æ–≤–∞–ª—é—Ç—É, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫—É–ø–∏—Ç—å.
      transitions:
        - {name: to_market_buy_2, state_to: market_buy_2, command: {type: 'button', arguments: ['/market_buy_btc', 'BTC']}}
        - {name: to_market_buy_2_2, state_to: market_buy_2, command: {type: 'button', arguments: ['/market_buy_eth', 'ETH']}}
        - {name: to_market_buy_2_3, state_to: market_buy_2, command: {type: 'button', arguments: ['/market_buy_usdt', 'USDT']}}
        - {name: to_market_buy_2_4, state_to: market_buy_2, command: {type: 'button', arguments: ['/market_buy_bnb', 'BNB']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }
    -
      name: market_buy_2
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_currency' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ {{.market_order_currency}}, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏
      transitions:
        - { name: to_market_buy_3, state_to: market_buy_3, command: { type: 'text_input' } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_buy_3
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_buy_amount' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å —Å–≤–æ–µ–≥–æ {{.market_order_currency}} –∫–æ—à–µ–ª—å–∫–∞, –∫—É–¥–∞ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏.
      transitions:
        - { name: to_market_buy_co, state_to: market_buy_co, command: { type: 'text_input' } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_buy_co
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_buy_address' }
      transitions:
        - {name: to_market_buy_co2, state_to: market_buy_co2, command: {type: 'instant'}}

    -
      name: market_buy_co2
      actions:
        calculate_market_buy_order:
          name: calculate_market_buy_order
      transitions:
        - {name: to_market_buy_4, state_to: market_buy_4, command: {type: 'instant'}}

    -
      name: market_buy_4
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥. –û—Ç–ø—Ä–∞–≤—å—Ç–µ {{.market_order_payment_sum}} —Ä—É–±. –Ω–∞ –∫–∞—Ä—Ç—É {{.market_order_service_card}}. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
      transitions:
        - {name: to_market_buy_5, state_to: market_buy_5, command: {type: 'button', arguments: ['/market_buy_5', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ']}}
        - {name: to_main_menu_mbc_2, state_to: main_menu, command: {type: 'button', arguments: ['/market_buy_xcancel_2', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_buy_5
      actions:
        confirm_market_order:
          name: confirm_market_order
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫. –ù–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞: {{.market_last_order_key}}
      transitions:
        - {name: to_main_menu_market_buy, state_to: main_menu, command: {type: 'button', arguments: ['/to_main_menu_from_mb5', '–û–ö']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_sell
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_type' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏–ø–∏—Ç–æ–≤–∞–ª—é—Ç—É, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–¥–∞—Ç—å.
      transitions:
        - {name: to_market_sell_2, state_to: market_sell_2, command: {type: 'button', arguments: ['/market_sell_btc', 'BTC']}}
        - {name: to_market_sell_2_1, state_to: market_sell_2, command: {type: 'button', arguments: ['/market_sell_bnb', 'BNB']}}
        - {name: to_market_sell_2_2, state_to: market_sell_2, command: {type: 'button', arguments: ['/market_sell_eth', 'ETH']}}
        - {name: to_market_sell_2_3, state_to: market_sell_2, command: {type: 'button', arguments: ['/market_sell_usdt', 'USDT']}}
        - {name: to_main_menu_msc_1, state_to: main_menu, command: {type: 'button', arguments: ['/market_buy_xcancel_3', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_sell_2
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_currency' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ {{.market_order_currency}}, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–¥–∞—Ç—å
      transitions:
        - { name: to_market_sell_3, state_to: market_sell_3, command: { type: 'text_input' } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_sell_3
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_sell_amount' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Å–≤–æ–µ–π –∫–∞—Ä—Ç—ã, –Ω–∞ –Ω–µ–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏.
      transitions:
        - { name: to_market_sell_co, state_to: market_sell_co, command: { type: 'text_input' } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_sell_co
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_sell_card' }
      transitions:
        - {name: to_market_sell_co2, state_to: market_sell_co2, command: {type: 'instant'}}

    -
      name: market_sell_co2
      actions:
        calculate_market_sell_order:
          name: calculate_market_sell_order
      transitions:
        - {name: to_market_sell_4, state_to: market_sell_4, command: {type: 'instant'}}

    -
      name: market_sell_4
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: {{.market_order_payment_sum}}
              –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å—Ç–µ {{.market_order_sell_amount}} {{.market_order_currency}} –Ω–∞ –∞–¥—Ä–µ—Å {{.market_order_service_address}}. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
      transitions:
        - {name: to_market_sell_5, state_to: market_sell_5, command: {type: 'button', arguments: ['/market_sell_5', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ']}}
        - {name: to_main_menu_msc_2, state_to: main_menu, command: {type: 'button', arguments: ['/market_buy_cancel_4', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: market_sell_5
      actions:
        confirm_market_order:
          name: confirm_market_order
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫. –ù–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞: {{.market_last_order_key}}
      transitions:
        - {name: to_main_menu_market_buy, state_to: main_menu, command: {type: 'button', arguments: ['/to_main_menu_from_ms5', '–û–ö']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet
      actions:
        cancel_order_data:
          name: cancel_order_data
        show_wallet:
          name: show_wallet
          params:
            clear_previous: true
      transitions:
        - {name: to_wallet_buy_1, state_to: wallet_buy_1, command: {type: 'button', arguments: ['/to_wallet_buy_1_from_wallet', '–ö—É–ø–∏—Ç—å']}}
        - {name: to_wallet_sell_1, state_to: wallet_sell_1, command: {type: 'button', arguments: ['/to_wallet_sell_1_from_wallet', '–ü—Ä–æ–¥–∞—Ç—å']}}
        - {name: to_wallet_exchange_1, state_to: wallet_exchange_1, command: {type: 'button', arguments: ['/to_wallet_exchange_1_from_wallet', '–ü–µ—Ä–µ–≤–æ–¥']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_buy_1
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'wallet_order_type' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏
      transitions:
        - {name: to_wallet_buy_2_wallet_1, state_to: wallet_buy_2, command: {type: 'button', arguments: ['/wallet_buy_btc', 'BTC']}}
        - {name: to_wallet_buy_2_wallet_2, state_to: wallet_buy_2, command: {type: 'button', arguments: ['/wallet_buy_eth', 'ETH']}}
        - {name: to_wallet_buy_2_wallet_3, state_to: wallet_buy_2, command: {type: 'button', arguments: ['/wallet_buy_bnb', 'BNB']}}
        - {name: to_wallet_buy_2_wallet_4, state_to: wallet_buy_2, command: {type: 'button', arguments: ['/wallet_buy_usdt', 'USDT']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }


    -
      name: wallet_buy_2
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'wallet_order_currency' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ {{.wallet_order_currency}}, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏
      transitions:
        - { name: to_wallet_buy_co, state_to: wallet_buy_co, command: { type: 'text_input' } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_buy_co
      actions:
        remember_name:
          name: remember_input
          params: { var: 'wallet_order_buy_amount' }
      transitions:
        - {name: to_wallet_buy_co2, state_to: wallet_buy_co2, command: {type: 'instant'}}

    -
      name: wallet_buy_co2
      actions:
        calculate_wallet_buy_order:
          name: calculate_wallet_buy_order
      transitions:
        - {name: to_wallet_buy_4, state_to: wallet_buy_4, command: {type: 'instant'}}

    -
      name: wallet_buy_4
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥. –û—Ç–ø—Ä–∞–≤—å—Ç–µ {{.wallet_order_payment_sum}} —Ä—É–±. –Ω–∞ –∫–∞—Ä—Ç—É {{.wallet_order_service_card}}. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
      transitions:
        - {name: to_wallet_buy_5, state_to: wallet_buy_5, command: {type: 'button', arguments: ['/wallet_buy_5', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ']}}
        - {name: to_main_menu_wbc_4, state_to: main_menu, command: {type: 'button', arguments: ['/wallet_buy_5_cancel_2', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_buy_5
      actions:
        notify_wallet_order:
          name: notify_wallet_order
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫. –ù–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞: {{.wallet_last_order_key}}
      transitions:
        - {name: to_main_menu_wallet_buy, state_to: main_menu, command: {type: 'button', arguments: ['/to_main_menu_from_wb5', '–û–ö']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_sell_1
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'wallet_order_type' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å
      transitions:
        - {name: to_wallet_sell_1_1_wallet_1, state_to: wallet_sell_1_1, command: {type: 'button', arguments: ['/wallet_sell_btc', 'BTC']}}
        - {name: to_wallet_sell_1_1_wallet_2, state_to: wallet_sell_1_1, command: {type: 'button', arguments: ['/wallet_sell_eth', 'ETH']}}
        - {name: to_wallet_sell_1_1_wallet_3, state_to: wallet_sell_1_1, command: {type: 'button', arguments: ['/wallet_sell_bnb', 'BNB']}}
        - {name: to_wallet_sell_1_1_wallet_4, state_to: wallet_sell_1_1, command: {type: 'button', arguments: ['/wallet_sell_usdt', 'USDT']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }


    -
      name: wallet_sell_1_1
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'wallet_order_currency' }
      transitions:
        - { name: to_wallet_sell_2, state_to: wallet_sell_2, command: {type: 'instant'} }

    -
      name: wallet_sell_2
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ {{.wallet_order_currency}}, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–¥–∞—Ç—å
      transitions:
        - { name: to_wallet_sell_4, state_to: wallet_sell_4, command: {type: 'validate_wallet_order', arguments: [true]} }
        - { name: to_wallet_sell_5, state_to: wallet_sell_5, command: {type: 'validate_wallet_order', arguments: [false]} }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_sell_4
      actions:
        remember:
          name: remember_input
          params: { var: 'wallet_order_sell_amount' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤
      transitions:
        - { name: to_wallet_sell_6, state_to: wallet_sell_6, command: { type: 'text_input' } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_sell_5
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –ø—Ä–æ–¥–∞–∂—É. –í—ã —É–∫–∞–∑–∞–ª–∏ –Ω–µ–≤–µ—Ä–Ω—É—é —Å—É–º–º—É –ø—Ä–æ–¥–∞–∂–∏ (—Å—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å–ª–æ–º, –Ω–∞ —Å—á–µ—Ç—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤)
      transitions:
        - {name: to_st_btn2, state_to: wallet_sell_2, command: {type: 'button', arguments: ['/ws5btn2', '–ù–∞–∑–∞–¥']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_sell_6
      actions:
        remember:
          name: remember_input
          params: { var: 'wallet_order_client_card' }
      transitions:
        - {name: to_wallet_sell_7, state_to: wallet_sell_7, command: {type: 'instant'}}

    -
      name: wallet_sell_7
      actions:
        calculate_wallet_sell_order:
          name: calculate_wallet_sell_order
      transitions:
        - {name: to_wallet_sell_8, state_to: wallet_sell_8, command: {type: 'instant'}}

    -
      name: wallet_sell_8
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: {{.wallet_order_payment_sum}} —Ä—É–±.
              –î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–¥–µ–ª–∫—É. –û—Ç–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –±—É–¥–µ—Ç –Ω–µ–ª—å–∑—è.
      transitions:
        - {name: to_ws_9, state_to: wallet_sell_9, command: {type: 'button', arguments: ['/to_ws_9', '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –ø—Ä–æ–¥–∞–∂—É']}}
        - {name: to_wz_mm, state_to: main_menu, command: {type: 'button', arguments: ['/to_wz_mm', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_sell_9
      actions:
        notify_wallet_order:
          name: notify_wallet_order
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫. –ù–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞: {{.wallet_last_order_key}}
      transitions:
        - {name: to_main_menu_market_buy, state_to: main_menu, command: {type: 'button', arguments: ['/to_main_menu_from_ms5', '–û–ö']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_exchange_1
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'wallet_order_type' }
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–π —Å—á–µ—Ç
      transitions:
        - {name: to_wallet_exchange_1_1_wallet_1, state_to: wallet_exchange_1_1, command: {type: 'button', arguments: ['/exchange_buy_btc', 'BTC']}}
        - {name: to_wallet_exchange_1_1_wallet_2, state_to: wallet_exchange_1_1, command: {type: 'button', arguments: ['/exchange_buy_eth', 'ETH']}}
        - {name: to_wallet_exchange_1_1_wallet_3, state_to: wallet_exchange_1_1, command: {type: 'button', arguments: ['/exchange_buy_bnb', 'BNB']}}
        - {name: to_wallet_exchange_1_1_wallet_4, state_to: wallet_exchange_1_1, command: {type: 'button', arguments: ['/exchange_buy_usdt', 'USDT']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_exchange_1_1
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'wallet_order_currency' }
      transitions:
        - { name: to_wallet_exchange_2, state_to: 'wallet_exchange_2', command: { type: 'instant' } }

    -
      name: wallet_exchange_2
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ {{.wallet_order_currency}}, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–≤–µ—Å—Ç–∏
      transitions:
        - { name: to_wallet_exchange_2_1, state_to: wallet_exhange_2_1, command: { type: 'validate_wallet_order', arguments: [ false ] } }
        - { name: to_wallet_exchange_3, state_to: wallet_exchange_3, command: { type: 'validate_wallet_order', arguments: [ true ] } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_exhange_2_1
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –ø—Ä–æ–¥–∞–∂—É. –í—ã —É–∫–∞–∑–∞–ª–∏ –Ω–µ–≤–µ—Ä–Ω—É—é —Å—É–º–º—É –ø—Ä–æ–¥–∞–∂–∏ (—Å—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å–ª–æ–º, –Ω–∞ —Å—á–µ—Ç—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤)
      transitions:
        - {name: to_st_btn2, state_to: wallet_exchange_2, command: {type: 'button', arguments: ['/ws5btn2', '–ù–∞–∑–∞–¥']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_exchange_3
      actions:
        remember_name:
          name: remember_input
          params: { var: 'wallet_order_exchange_amount' }
      transitions:
        - {name: to_wallet_exchange_4, state_to: wallet_exchange_4, command: {type: 'instant'}}

    -
      name: wallet_exchange_4
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞
      transitions:
        - { name: to_wallet_exchange_5, state_to: wallet_exchange_5, command: { type: 'text_input' } }
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_exchange_5
      actions:
        remember_name:
          name: remember_input
          params: { var: 'wallet_order_exchange_address' }
      transitions:
        - {name: to_wallet_exchange_6, state_to: wallet_exchange_6, command: {type: 'instant'}}

    -
      name: wallet_exchange_6
      actions:
        calculate_exchange_order:
          name: calculate_wallet_exchange_order
      transitions:
        - {name: to_wallet_exchange_7, state_to: wallet_exchange_7, command: {type: 'instant'}}

    -
      name: wallet_exchange_7
      actions:
        send_text:
          name: send_text
          params:
            clear_previous: true
            text: >
              –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥
      transitions:
        - {name: to_wallet_exchange_8, state_to: wallet_exchange_8, command: {type: 'button', arguments: ['/wallet_exchange_7', '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å']}}
        - {name: to_main_menu_w–µ_7, state_to: main_menu, command: {type: 'button', arguments: ['/wallet_exchange_7_cancel', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }

    -
      name: wallet_exchange_8
      actions:
        notify_wallet_order:
          name: notify_wallet_order
        send_text:
          clear_previous: true
          name: send_text
          params:
            text: >
              –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫. –ù–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞: {{.wallet_last_order_key}}
      transitions:
        - {name: to_main_menu_wallet_exchange, state_to: main_menu, command: {type: 'button', arguments: ['/to_main_menu_from_we_6', '–û–ö']}}
        - { name: to_market_ri, state_to: market, command: { type: 'recognize_input', arguments: [ '–ú–∞—Ä–∫–µ—Çüíµ' ] } }
        - { name: to_wallet_ri, state_to: wallet, command: { type: 'recognize_input', arguments: [ '–ö–æ—à–µ–ª–µ–∫üí†' ] } }
