scenario:
  name: tg_vcv_unbox
  provider:
    name: telegram
    token: '1799138792:AAGryx8c1D48yT8TAD5VCG1yzXs8k3tPtIc'

  states:
    -
      name: unknown
      transitions:
        - {name: to_start, state_to: start, command: {type: 'text_input', arguments: ['/start']}}

    -
      name: start
      actions:
        send_text:
          name: send_text
          params:
            text: >
              –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –ø—Ä–æ–¥–∞—Ç—å –∏–ª–∏ –∫—É–ø–∏—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É. –ê –µ—â–µ —É –Ω–∞—Å —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è —Å–≤–æ–π –∫–æ—à–µ–ª—ë–∫, –≥–¥–µ —Ç—ã —Å–º–æ–∂–µ—à—å –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–≤–æ–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ :)
              –î–∞–≤–∞–π –∑–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–±–µ –∞–∫–∫–∞—É–Ω—Ç –≤ —Å–∏—Å—Ç–µ–º–µ, –Ω–∞–ø–∏—à–∏ –∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç.
      transitions:
        - {name: to_nice_to_meet_you, state_to: nice_to_meet_you, command: {type: 'text_input'}}

    -
      name: nice_to_meet_you
      actions:
        remember_name:
          name: remember_input
          params: { var: 'user_name' }
        send_text:
          name: send_text
          params:
            text: '–°–ø–∞—Å–∏–±–æ, {{.user_name}}. –¢–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω. –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–æ–π –æ–±–º–µ–Ω–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç.'
      transitions:
        - {name: to_main_menu, state_to: main_menu, command: {type: 'button', arguments: ['/back', '–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–µ–Ω—é']}}

    -
      name: main_menu
      actions:
        cancel_order_data:
          name: cancel_order_data
        send_text:
          name: send_text
          params:
            text: >
              –¢—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é —Å–∏—Å—Ç–µ–º—ã.
              –ú–∞—Ä–∫–µ—Ç - –ø–æ–∑–≤–æ–ª–∏—Ç —Ç–µ–±–µ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∏ –ø–æ–∫—É–ø–∞—Ç—å –≤–∞–ª—é—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—è –ª—é–±—ã–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏ –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç.
              –ö–æ—à–µ–ª–µ–∫ - —Ç–≤–æ–π –∫–æ—à–µ–ª–µ–∫ –Ω–∞ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, —Å –µ–≥–æ –ø–æ–º–æ—â—å—é —Ç—ã –º–æ–∂–µ—à—å —Å –ª—ë–≥–∫–æ—Å—Ç—å—é –ø–æ–∫—É–ø–∞—Ç—å, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å, –ø—Ä–æ–¥–∞–≤–∞—Ç—å, –∞ —Ç–∞–∫ –∂–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ üòâ
              –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –º—ã –≤—ã—Å—Ç—É–ø–∞–µ–º –≥–∞—Ä–∞–Ω—Ç–æ–º —Å–¥–µ–ª–æ–∫.
      transitions:
        - {name: buy, state_to: market, command: {type: 'button', arguments: ['/market', '–ú–∞—Ä–∫–µ—Ç']}}
        - {name: sell, state_to: main_menu, command: {type: 'button', arguments: ['/wallet', '–ö–æ—à–µ–ª–µ–∫']}}

    -
      name: market
      actions:
        send_text:
          name: send_text
          params:
            text: >
              –ú–∞—Ä–∫–µ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç —Ç–µ–±–µ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∏ –ø–æ–∫—É–ø–∞—Ç—å –≤–∞–ª—é—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—è –ª—é–±—ã–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∏ –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç. –í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ.
      transitions:
        - {name: to_market_buy, state_to: market_buy, command: {type: 'button', arguments: ['/market_buy', '–ö—É–ø–∏—Ç—å']}}
        - {name: to_market_sell, state_to: market_sell, command: {type: 'button', arguments: ['/market_sell', '–ü—Ä–æ–¥–∞—Ç—å']}}

    -
      name: market_buy
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_type' }
        send_text:
          name: send_text
          params:
            text: >
              –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏ –∫—Ä–∏–ø–∏—Ç–æ–≤–∞–ª—é—Ç—É, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—á–µ—à—å –∫—É–ø–∏—Ç—å.
      transitions:
        - {name: to_market_buy_2, state_to: market_buy_2, command: {type: 'button', arguments: ['/market_buy_btc', 'BTC']}}
        - {name: to_market_buy_2_2, state_to: market_buy_2, command: {type: 'button', arguments: ['/market_buy_eth', 'ETH']}}
        - {name: to_market_buy_2_3, state_to: market_buy_2, command: {type: 'button', arguments: ['/market_buy_usdt', 'USDT']}}
        - {name: to_main_menu_mbc_1, state_to: main_menu, command: {type: 'button', arguments: ['/market_buy_cancel', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}

    -
      name: market_buy_2
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_currency' }
        send_text:
          name: send_text
          params:
            text: >
              –í–≤–µ–¥–∏ —Å—É–º–º—É –≤ {{.market_order_currency}}, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏
      transitions:
        - { name: to_market_buy_3, state_to: market_buy_3, command: { type: 'text_input' } }

    -
      name: market_buy_3
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_buy_amount' }
        send_text:
          name: send_text
          params:
            text: >
              –í–≤–µ–¥–∏ –∞–¥—Ä–µ—Å —Å–≤–æ–µ–≥–æ {{.market_order_currency}} –∫–æ—à–µ–ª—å–∫–∞, –∫—É–¥–∞ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏.
      transitions:
        - { name: to_market_buy_co, state_to: market_buy_co, command: { type: 'text_input' } }

    -
      name: market_buy_co
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_buy_address' }
      transitions:
        - {name: to_market_buy_co2, state_to: market_buy_co2, command: {type: 'instant'}}

    -
      name: market_buy_co2
      actions:
        calculate_market_buy_order:
          name: calculate_market_buy_order
      transitions:
        - {name: to_market_buy_4, state_to: market_buy_4, command: {type: 'instant'}}

    -
      name: market_buy_4
      actions:
        send_text:
          name: send_text
          params:
            text: >
              –û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥. –û—Ç–ø—Ä–∞–≤—å {{.market_order_payment_sum}} —Ä—É–±. –Ω–∞ –∫–∞—Ä—Ç—É {{.market_order_service_card}}. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –Ω–∞–∂–º–∏ "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
      transitions:
        - {name: to_market_buy_5, state_to: market_buy_5, command: {type: 'button', arguments: ['/market_buy_5', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ']}}
        - {name: to_main_menu_mbc_2, state_to: main_menu, command: {type: 'button', arguments: ['/market_buy_cancel_2', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}

    -
      name: market_buy_5
      actions:
        confirm_market_order:
          name: confirm_market_order
        send_text:
          name: send_text
          params:
            text: >
              –¢–≤–æ–π –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫. –ù–æ–º–µ—Ä —Ç–≤–æ–µ–≥–æ –∑–∞–∫–∞–∑–∞: {{.market_last_order_key}}
      transitions:
        - {name: to_main_menu_market_buy, state_to: main_menu, command: {type: 'button', arguments: ['/to_main_menu_from_mb5', '–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é']}}

    -
      name: market_sell
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_type' }
        send_text:
          name: send_text
          params:
            text: >
              –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏ –∫—Ä–∏–ø–∏—Ç–æ–≤–∞–ª—é—Ç—É, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—á–µ—à—å –ø—Ä–æ–¥–∞—Ç—å.
      transitions:
        - {name: to_market_sell_2, state_to: market_sell_2, command: {type: 'button', arguments: ['/market_sell_btc', 'BTC']}}
        - {name: to_market_sell_2_2, state_to: market_sell_2, command: {type: 'button', arguments: ['/market_sell_eth', 'ETH']}}
        - {name: to_market_sell_2_3, state_to: market_sell_2, command: {type: 'button', arguments: ['/market_sell_usdt', 'USDT']}}
        - {name: to_main_menu_msc_1, state_to: main_menu, command: {type: 'button', arguments: ['/market_buy_cancel_3', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}

    -
      name: market_sell_2
      actions:
        remember_type:
          name: remember_caption
          params: { var: 'market_order_currency' }
        send_text:
          name: send_text
          params:
            text: >
              –í–≤–µ–¥–∏ —Å—É–º–º—É –≤ {{.market_order_currency}}, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—á–µ—à—å –ø—Ä–æ–¥–∞—Ç—å
      transitions:
        - { name: to_market_sell_3, state_to: market_sell_3, command: { type: 'text_input' } }

    -
      name: market_sell_3
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_sell_amount' }
        send_text:
          name: send_text
          params:
            text: >
              –í–≤–µ–¥–∏ –Ω–æ–º–µ—Ä —Å–≤–æ–µ–π –∫–∞—Ä—Ç—ã, –Ω–∞ –Ω–µ–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏.
      transitions:
        - { name: to_market_sell_co, state_to: market_sell_co, command: { type: 'text_input' } }

    -
      name: market_sell_co
      actions:
        remember_name:
          name: remember_input
          params: { var: 'market_order_sell_card' }
      transitions:
        - {name: to_market_sell_co2, state_to: market_sell_co2, command: {type: 'instant'}}

    -
      name: market_sell_co2
      actions:
        calculate_market_sell_order:
          name: calculate_market_sell_order
      transitions:
        - {name: to_market_sell_4, state_to: market_sell_4, command: {type: 'instant'}}

    -
      name: market_sell_4
      actions:
        send_text:
          name: send_text
          params:
            text: >
              –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: {{.market_order_payment_sum}}
              –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å {{.market_order_sell_amount}} {{.market_order_currency}} –Ω–∞ –∞–¥—Ä–µ—Å {{.market_order_service_address}}. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –Ω–∞–∂–º–∏ "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
      transitions:
        - {name: to_market_sell_5, state_to: market_sell_5, command: {type: 'button', arguments: ['/market_sell_5', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ']}}
        - {name: to_main_menu_msc_2, state_to: main_menu, command: {type: 'button', arguments: ['/market_buy_cancel_4', '–û—Ç–º–µ–Ω–∞ ‚ùå']}}

    -
      name: market_sell_5
      actions:
        confirm_market_order:
          name: confirm_market_order
        send_text:
          name: send_text
          params:
            text: >
              –¢–≤–æ–π –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫. –ù–æ–º–µ—Ä —Ç–≤–æ–µ–≥–æ –∑–∞–∫–∞–∑–∞: {{.market_last_order_key}}
      transitions:
        - {name: to_main_menu_market_buy, state_to: main_menu, command: {type: 'button', arguments: ['/to_main_menu_from_ms5', '–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é']}}
